---
layout: page
---
{{ content }}

{% if page.collection and page.collection.size > 0 %}
  {% assign collection = site[page.collection] %}
  {% if collection and collection.size > 0 %}

    {%- comment -%}
    Sort by `finished` date (YYYY-MM-DD) descending.
    Items without `finished` are appended after finished ones.
    {%- endcomment -%}
    {% assign finished_books = collection | where_exp: "b", "b.finished != nil and b.finished != ''" | sort: "finished" | reverse %}
    {% assign unfinished_books = collection | where_exp: "b", "b.finished == nil or b.finished == ''" %}

    {% assign sorted_books = finished_books | concat: unfinished_books %}

    <ul>
      {% for item in sorted_books %}
        <figure class="cover">
          <a class="cover-link" href="{{ item.url | relative_url }}">
            {% if item.cover %}
              <img alt="{{ item.title }} cover" src="{{ item.cover | prepend: page.covers | relative_url }}" style="height:200px">
            {% elsif item.olid %}
              <img alt="{{ item.title }} cover" src="http://covers.openlibrary.org/b/olid/{{ item.olid }}-L.jpg?default=false" style="height:200px">
            {% elsif item.isbn %}
              <img alt="{{ item.title }} cover" src="http://covers.openlibrary.org/b/isbn/{{ item.isbn }}-L.jpg?default=false" style="height:200px">
            {% endif %}

            {% if item.status %}
              {% assign statuses = 'abandoned,finished,interested,paused,queued,reading,reread' | split: ',' %}
              {% assign status = item.status | downcase | strip %}
              {% if statuses contains status %}
                <figcaption class="{{ status | downcase }}">{{ status | upcase }}</figcaption>
              {% else %}
                <figcaption class="uncategorized">UNCATEGORIZED</figcaption>
              {% endif %}
            {% else %}
              <figcaption class="uncategorized">UNCATEGORIZED</figcaption>
            {% endif %}
          </a>
        </figure>
      {% endfor %}
    </ul>

  {% endif %}
{% endif %}
